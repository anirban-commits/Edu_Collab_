<!-- core/templates/core/resource_list.html -->
{% extends 'core/base.html' %}

{% block content %}
<nav class="text-sm text-gray-600 mb-6">
    <a href="{% url 'home' %}" class="text-indigo-600 hover:underline">Home</a>
    <span> / </span>
    <a href="{% url 'year_detail' semester.year.year_number %}" class="text-indigo-600 hover:underline">Year {{ semester.year.year_number }}</a>
    <span> / </span>
    <a href="{% url 'semester_detail' semester.year.year_number semester.semester_number %}" class="text-indigo-600 hover:underline">Semester {{ semester.semester_number }}</a>
    <span> / </span>
    <span class="font-medium">{{ exam.name }}</span>
</nav>

<h2 class="text-2xl font-bold text-gray-800 mb-6">{{ exam.name }} Resources</h2>

{% if resources %}
    <div class="space-y-5">
        {% for res in resources %}
            <div class="bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-md transition p-6">
                <div class="flex justify-between items-start">
                    <h3 class="text-xl font-bold text-gray-800">{{ res.title }}</h3>
                    {% if res.is_premium %}
                        <span class="bg-purple-100 text-purple-800 text-xs px-2 py-1 rounded">Premium</span>
                    {% endif %}
                </div>

                {% if res.description %}
                    <p class="text-gray-600 mt-2 text-sm">{{ res.description }}</p>
                {% endif %}

                <!-- Book Guide -->
                {% if res.book_recommendation %}
                    <div class="mt-4 pt-4 border-t border-gray-100">
                        <div class="flex items-start">
                            <span class="text-indigo-600 font-medium mr-2">üìò</span>
                            <div>
                                <div class="text-sm font-medium">{{ res.book_recommendation }}</div>
                                {% if res.book_pages %}
                                    <div class="text-xs text-gray-500">Pages: {{ res.book_pages }}</div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                {% endif %}

                <!-- Video -->
                {% if res.video_url %}
                    <div class="mt-4">
                        <div class="text-sm font-medium text-gray-700 mb-2">üé• Video Lecture</div>
                        <div class="aspect-video bg-black rounded overflow-hidden">
                            <iframe class="w-full h-full" 
                                    src="{{ res.video_url }}" 
                                    frameborder="0" 
                                    allowfullscreen></iframe>
                        </div>
                    </div>
                {% endif %}

                <!-- Files -->
                {% if res.pyq_pdf or res.practice_sheet %}
                    <div class="mt-4 pt-4 border-t border-gray-100">
                        <div class="text-sm font-medium text-gray-700 mb-2">üì• Download Resources</div>
                        <div class="flex flex-wrap gap-2">
                            {% if res.pyq_pdf %}
                                <a href="{{ res.pyq_pdf.url }}" target="_blank"
                                class="inline-flex items-center bg-red-50 hover:bg-red-100 text-red-700 px-3 py-2 rounded-lg text-sm border border-red-200 transition">
                                    <span>üìÑ PYQ</span>
                                </a>
                            {% endif %}
                            {% if res.practice_sheet %}
                                <a href="{{ res.practice_sheet.url }}" target="_blank"
                                class="inline-flex items-center bg-blue-50 hover:bg-blue-100 text-blue-700 px-3 py-2 rounded-lg text-sm border border-blue-200 transition">
                                    <span>üìù Practice Sheet</span>
                                </a>
                            {% endif %}
                        </div>
                    </div>
                {% endif %}
            </div>
        {% endfor %}
    </div>
{% else %}
    <p class="text-gray-500">No resources available yet for this exam.</p>
{% endif %}

<a href="{% url 'semester_detail' semester.year.year_number semester.semester_number %}" 
   class="inline-block mt-6 text-indigo-600 hover:underline">‚Üê Back to exams</a>
{% endblock %}